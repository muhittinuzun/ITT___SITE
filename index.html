<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITT TEKNOLOJİ A.Ş. | Dijital Dönüşümün Mimarları</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Tajawal:wght@400;500;700;800&family=Oswald:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/devicon.min.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Supabase JS Client -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.39.7/dist/umd/supabase.js"></script>

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        arabic: ['Tajawal', 'sans-serif'],
                        brand: ['Oswald', 'sans-serif'], 
                    },
                    colors: {
                        brand: {
                            dark: '#0f172a',
                            primary: '#19AFE6',
                            secondary: '#0AB0CE',
                            deep: '#184659',
                            gray: '#6D6E71',
                            surface: '#1e293b',
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'scroll': 'scroll 30s linear infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-20px)' } },
                        scroll: { '0%': { transform: 'translateX(0)' }, '100%': { transform: 'translateX(-100%)' } }
                    }
                }
            }
        }
    </script>

    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #184659; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #19AFE6; }
        
        .glass-panel {
            background: rgba(24, 70, 89, 0.4);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(25, 175, 230, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        
        .hero-card-container { perspective: 1000px; }
        .hero-card {
            transform: rotateY(-10deg) rotateX(5deg);
            transition: transform 0.5s ease;
        }
        .hero-card-container:hover .hero-card {
            transform: rotateY(0deg) rotateX(0deg);
        }

        .text-gradient {
            background: linear-gradient(135deg, #19AFE6 0%, #0AB0CE 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .hero-glow {
            position: absolute; width: 800px; height: 800px;
            background: radial-gradient(circle, rgba(25, 175, 230, 0.15) 0%, rgba(10, 176, 206, 0) 70%);
            border-radius: 50%; pointer-events: none; z-index: 0;
        }
        
        .scroller { max-width: 100%; }
        .scroller__inner { padding-block: 1rem; display: flex; flex-wrap: wrap; gap: 3rem; }
        .scroller[data-animated="true"] { overflow: hidden; mask: linear-gradient(90deg, transparent, white 20%, white 80%, transparent); }
        .scroller[data-animated="true"] .scroller__inner { width: max-content; flex-wrap: nowrap; animation: scroll 40s linear infinite; }
        
        .modal-enter { opacity: 0; transform: scale(0.95); }
        .modal-enter-active { opacity: 1; transform: scale(1); transition: opacity 300ms, transform 300ms; }
    </style>
</head>
<body class="bg-brand-dark text-slate-300 antialiased overflow-x-hidden">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- SUPABASE CONFIGURATION ---
        const SUPABASE_URL = "https://pgdnoplfshyykcivtquh.supabase.co"; 
        const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnZG5vcGxmc2h5eWtjaXZ0cXVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY5MDk1NDIsImV4cCI6MjA4MjQ4NTU0Mn0.CRvnf0p6wl6oZDwMbwYR0cu_rIzwC7n8qJQKmon9-rk";
        
        // --- HELPER FUNCTIONS ---
        
        // Türkçe karakter decode
        const decodeText = (text) => {
            if (!text) return "";
            try {
                return decodeURIComponent(escape(text));
            } catch (e) {
                return text;
            }
        };

        // Görsel URL'e cache-busting ekle (GÖRSEL DEĞİŞMEME SORUNUNU ÇÖZER)
        const getImageUrl = (url, updatedAt) => {
            if (!url) return null;
            
            // Cache-busting için timestamp oluştur
            let cacheBuster;
            if (updatedAt) {
                cacheBuster = new Date(updatedAt).getTime();
            } else {
                cacheBuster = Date.now();
            }
            
            // URL'de zaten ? varsa & ekle, yoksa ? ekle
            const separator = url.includes('?') ? '&' : '?';
            return `${url}${separator}v=${cacheBuster}`;
        };

        // Supabase bağlantısını bekle
        const waitForSupabase = async (timeout = 10000) => {
            const start = Date.now();
            
            while (Date.now() - start < timeout) {
                const sbLib = window.supabase;
                
                if (sbLib && typeof sbLib.createClient === 'function') {
                    console.log("✅ Supabase kütüphanesi bulundu.");
                    return sbLib.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                }
                
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            return null;
        };

        // --- UI TEXTS ---
        const UI_LABELS = {
            tr: {
                nav: { home: "Anasayfa", products: "Ürünler", services: "Hizmetler", blog: "Blog", about: "Kurumsal", contact: "İletişim" },
                hero: { title: "Geleceği Kodluyoruz", subtitle: "Global Ölçekte", cta: "Keşfet", desc: "Bilişim Vadisi'nden dünyaya teknoloji ihraç ediyoruz." },
                titles: { products: "Ürünlerimiz", services: "Hizmetlerimiz", blog: "Bilgi Merkezi", tech: "Teknolojilerimiz", contact: "İletişim" },
                modal: { close: "Kapat", next: "Sonraki", prev: "Önceki" },
                contact: { title: "İletişim", subtitle: "Projeleriniz için bize ulaşın", btn: "Mail Gönder", name: "Adınız Soyadınız", email: "E-Posta", phone: "Telefon", msg: "Mesajınız" },
                error: "Veritabanı bağlantısı henüz kurulamadı. Lütfen internet bağlantınızı kontrol edip sayfayı yenileyiniz.",
                libError: "Supabase kütüphanesi yüklenemedi.",
                empty: "Henüz içerik eklenmemiş.",
                readMore: "Detayları Gör"
            },
            en: {
                nav: { home: "Home", products: "Products", services: "Services", blog: "Blog", about: "About", contact: "Contact" },
                hero: { title: "Coding Future", subtitle: "Global Scale", cta: "Discover", desc: "Exporting technology from IT Valley to the world." },
                titles: { products: "Our Products", services: "Services", blog: "Knowledge Hub", tech: "Our Tech", contact: "Contact" },
                modal: { close: "Close", next: "Next", prev: "Prev" },
                contact: { title: "Contact", subtitle: "Reach out for your projects", btn: "Send Email", name: "Full Name", email: "Email", phone: "Phone", msg: "Your Message" },
                error: "Database connection failed. Please check your connection and refresh.",
                libError: "Supabase library loading failed.",
                empty: "No content yet.",
                readMore: "Read More"
            },
            ar: {
                nav: { home: "الرئيسية", products: "منتجاتنا", services: "خدماتنا", blog: "المدونة", about: "من نحن", contact: "اتصل بنا" },
                hero: { title: "نبرمج المستقبل", subtitle: "نطاق عالمي", cta: "اكتشف", desc: "نصدر التكنولوجيا من وادي المعلومات للعالم." },
                titles: { products: "منتجاتنا", services: "خدماتنا", blog: "مركز المعرفة", tech: "تقنياتنا", contact: "اتصل بنا" },
                modal: { close: "إغلاق", next: "التالي", prev: "السابق" },
                contact: { title: "اتصل بنا", subtitle: "تواصل معنا لمشاريعك", btn: "ارسل بريد الكتروني", name: "الاسم الكامل", email: "البريد الإلكتروني", phone: "الهاتف", msg: "رسالتك" },
                error: "فشل الاتصال بقاعدة البيانات.",
                libError: "فشل تحميل مكتبة Supabase.",
                empty: "لا يوجد محتوى بعد.",
                readMore: "اقرأ المزيد"
            }
        };

        // --- COMPONENTS ---

        const DetailModal = ({ item, isOpen, onClose, onNext, onPrev, isRTL, t }) => {
            if (!isOpen || !item) return null;

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-4">
                    <div className="absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity" onClick={onClose}></div>
                    <div className="relative bg-brand-surface w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl border border-white/10 shadow-2xl flex flex-col md:flex-row animate-enter">
                        {item.image_url && (
                            <div className="w-full md:w-1/3 h-64 md:h-auto relative">
                                <img 
                                    src={getImageUrl(item.image_url, item.updated_at)} 
                                    alt={decodeText(item.title)} 
                                    className="w-full h-full object-cover" 
                                />
                                <div className="absolute inset-0 bg-gradient-to-t from-brand-surface to-transparent md:bg-gradient-to-r"></div>
                            </div>
                        )}
                        <div className="p-8 md:p-10 flex-1 flex flex-col">
                            <button onClick={onClose} className={`absolute top-4 ${isRTL ? 'left-4' : 'right-4'} w-10 h-10 rounded-full bg-white/10 hover:bg-red-500/20 hover:text-red-500 flex items-center justify-center transition-colors`}>
                                <i className="fa-solid fa-xmark"></i>
                            </button>
                            <div className="mb-6">
                                <span className="text-brand-primary text-xs font-bold uppercase tracking-wider border border-brand-primary/30 px-2 py-1 rounded mb-3 inline-block">
                                    {decodeText(item.category)}
                                </span>
                                <h2 className="text-3xl font-bold text-white font-brand mb-2">{decodeText(item.title)}</h2>
                                {item.display_date && <div className="text-slate-500 text-sm"><i className="fa-regular fa-calendar mr-2"></i>{item.display_date}</div>}
                            </div>
                            <div className="prose prose-invert prose-sm max-w-none text-slate-300 mb-8 overflow-y-auto custom-scroll" 
                                 dangerouslySetInnerHTML={{ __html: decodeText(item.content) }} />
                            <div className="mt-auto flex justify-between pt-6 border-t border-white/10">
                                <button onClick={onPrev} className="flex items-center gap-2 text-slate-400 hover:text-white transition-colors">
                                    <i className={`fa-solid fa-arrow-${isRTL ? 'right' : 'left'}`}></i> {t.modal.prev}
                                </button>
                                <button onClick={onNext} className="flex items-center gap-2 text-slate-400 hover:text-white transition-colors">
                                    {t.modal.next} <i className={`fa-solid fa-arrow-${isRTL ? 'left' : 'right'}`}></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const Navbar = ({ lang, setLang, t }) => {
            const [scrolled, setScrolled] = useState(false);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            
            useEffect(() => {
                const handleScroll = () => setScrolled(window.scrollY > 20);
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);
            
            return (
                <nav className={`fixed w-full z-50 transition-all duration-300 ${scrolled ? 'glass-panel py-3 shadow-2xl' : 'bg-transparent py-6'}`}>
                    <div className="container mx-auto px-6 flex justify-between items-center">
                        <div className="flex items-center gap-3">
                            <img src="https://ittyazilim.com/img/index/ITT_beyaz_web-01.svg" alt="ITT Logo" className="h-10 md:h-12" />
                            <span className="font-brand text-2xl text-white tracking-wide hidden md:block">ITT TECHNOLOGY</span>
                        </div>
                        <div className="hidden lg:flex items-center gap-8">
                            {['home', 'products', 'services', 'blog', 'about'].map(key => (
                                <a key={key} href={`#${key}`} className="text-sm font-medium hover:text-brand-primary transition-colors">{t.nav[key]}</a>
                            ))}
                            <a href="#contact" className="px-6 py-2 bg-brand-primary/10 hover:bg-brand-primary/20 border border-brand-primary/50 text-brand-primary rounded-full text-sm font-bold transition-all">{t.nav.contact}</a>
                            <div className="flex bg-brand-deep rounded-full p-1 border border-white/10">
                                {['tr', 'en', 'ar'].map((l) => (
                                    <button key={l} onClick={() => setLang(l)} className={`px-3 py-1 text-xs font-bold rounded-full uppercase transition-all ${lang === l ? 'bg-brand-primary text-white shadow-lg' : 'text-slate-400 hover:text-white'}`}>{l}</button>
                                ))}
                            </div>
                        </div>
                        <div className="lg:hidden text-white cursor-pointer" onClick={() => setMobileMenuOpen(!mobileMenuOpen)}>
                            <i className="fa-solid fa-bars text-2xl"></i>
                        </div>
                    </div>
                    
                    {/* Mobile Menu */}
                    {mobileMenuOpen && (
                        <div className="lg:hidden absolute top-full left-0 w-full bg-brand-dark/95 backdrop-blur-lg border-t border-white/10 p-6">
                            <div className="flex flex-col gap-4">
                                {['home', 'products', 'services', 'blog', 'about', 'contact'].map(key => (
                                    <a key={key} href={`#${key}`} onClick={() => setMobileMenuOpen(false)} className="text-lg font-medium hover:text-brand-primary transition-colors py-2">{t.nav[key]}</a>
                                ))}
                                <div className="flex bg-brand-deep rounded-full p-1 border border-white/10 mt-4 w-fit">
                                    {['tr', 'en', 'ar'].map((l) => (
                                        <button key={l} onClick={() => { setLang(l); setMobileMenuOpen(false); }} className={`px-4 py-2 text-sm font-bold rounded-full uppercase transition-all ${lang === l ? 'bg-brand-primary text-white shadow-lg' : 'text-slate-400 hover:text-white'}`}>{l}</button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}
                </nav>
            );
        };

        const Hero = ({ t }) => (
            <header id="home" className="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden min-h-screen flex items-center bg-brand-dark">
                <div className="hero-glow top-0 left-0 -translate-x-1/2 -translate-y-1/2 opacity-40"></div>
                <div className="hero-glow bottom-0 right-0 translate-x-1/2 translate-y-1/2 bg-brand-secondary/20 opacity-30"></div>
                <div className="absolute inset-0 z-[-1] opacity-20" style={{backgroundImage: `linear-gradient(#184659 1px, transparent 1px), linear-gradient(90deg, #184659 1px, transparent 1px)`, backgroundSize: '40px 40px'}}></div>
                
                <div className="container mx-auto px-6 relative z-10 grid lg:grid-cols-2 gap-16 items-center">
                    <div className="space-y-8 order-2 lg:order-1">
                        <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-brand-deep border border-brand-primary/30 text-brand-primary text-xs font-bold uppercase tracking-wider shadow-lg">
                            <i className="fa-solid fa-location-dot"></i> Bilişim Vadisi
                        </div>
                        <h1 className="text-5xl lg:text-7xl font-extrabold leading-tight text-white font-brand uppercase tracking-tight">
                            {t.hero.title} <br /> <span className="text-gradient">{t.hero.subtitle}</span>
                        </h1>
                        <p className="text-lg text-slate-400 max-w-xl leading-relaxed">{t.hero.desc}</p>
                        <a href="#products" className="inline-block px-8 py-4 bg-gradient-to-r from-brand-primary to-brand-secondary text-white rounded-lg font-bold shadow-lg hover:shadow-brand-primary/25 transition-all transform hover:-translate-y-1">
                            {t.hero.cta}
                        </a>
                    </div>
                    
                    <div className="order-1 lg:order-2 relative hero-card-container flex justify-center items-center">
                        <div className="hero-card relative w-full max-w-md aspect-square">
                            <div className="absolute inset-0 bg-brand-deep/30 backdrop-blur-md rounded-3xl border border-white/10 shadow-2xl animate-float flex flex-col justify-between p-6 overflow-hidden">
                                <div className="absolute top-0 right-0 w-32 h-32 bg-brand-primary/40 blur-[50px] rounded-full"></div>
                                <div className="absolute bottom-0 left-0 w-32 h-32 bg-brand-secondary/40 blur-[50px] rounded-full"></div>
                                
                                <div className="flex justify-between items-center border-b border-white/5 pb-4">
                                    <div className="flex gap-2">
                                        <div className="w-3 h-3 rounded-full bg-red-500"></div>
                                        <div className="w-3 h-3 rounded-full bg-yellow-500"></div>
                                        <div className="w-3 h-3 rounded-full bg-green-500"></div>
                                    </div>
                                    <div className="text-xs font-mono text-slate-400">itt_core_system.v2</div>
                                </div>
                                
                                <div className="space-y-3 font-mono text-sm">
                                    <div className="flex items-center gap-2 text-brand-primary"><i className="fa-solid fa-check"></i> <span>AI Module Loaded</span></div>
                                    <div className="flex items-center gap-2 text-brand-secondary"><i className="fa-solid fa-check"></i> <span>Database Connected</span></div>
                                    <div className="flex items-center gap-2 text-green-400"><i className="fa-solid fa-check"></i> <span>Security: High</span></div>
                                </div>

                                <div className="mt-4 p-4 bg-black/20 rounded-xl border border-white/5">
                                    <div className="text-xs text-slate-400 mb-2">Total Transactions</div>
                                    <div className="text-3xl font-bold text-white">2.4M+</div>
                                    <div className="h-1 w-full bg-brand-deep mt-2 rounded-full overflow-hidden">
                                        <div className="h-full w-[85%] bg-gradient-to-r from-brand-primary to-brand-secondary animate-pulse"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="absolute -z-10 top-10 -right-10 w-24 h-24 bg-brand-secondary rounded-full blur-xl opacity-20 animate-pulse-slow"></div>
                            <div className="absolute -z-10 -bottom-10 -left-10 w-32 h-32 bg-brand-primary rounded-full blur-xl opacity-20 animate-pulse-slow" style={{animationDelay: '1s'}}></div>
                        </div>
                    </div>
                </div>
            </header>
        );

        const ContentSection = ({ id, type, title, items, onSelect, lang, t, isLoading }) => {
            const filteredItems = items.filter(i => i.type === type && i.lang === lang);
            
            if (isLoading) {
                return (
                    <section id={id} className={`py-24 relative ${type === 'service' ? 'bg-brand-dark' : 'bg-brand-surface'} border-t border-white/5`}>
                        <div className="container mx-auto px-6">
                            <div className="text-center max-w-3xl mx-auto mb-20 animate-pulse">
                                <div className="h-8 bg-white/10 rounded w-1/3 mx-auto mb-6"></div>
                                <div className="h-1 w-24 bg-white/10 mx-auto"></div>
                            </div>
                            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                                {[1,2,3].map(i => (
                                    <div key={i} className="h-96 rounded-2xl bg-white/5 animate-pulse border border-white/5"></div>
                                ))}
                            </div>
                        </div>
                    </section>
                );
            }

            if (filteredItems.length === 0) return null;

            return (
                <section id={id} className={`py-24 relative ${type === 'service' ? 'bg-brand-dark' : 'bg-brand-surface'} border-t border-white/5`}>
                    <div className="container mx-auto px-6">
                        <div className="text-center max-w-3xl mx-auto mb-20">
                            <h2 className="text-4xl font-bold text-white font-brand mb-6">{title}</h2>
                            <div className="h-1 w-24 bg-gradient-to-r from-brand-primary to-transparent mx-auto"></div>
                        </div>
                        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                            {filteredItems.map((item) => (
                                <div key={item.id} onClick={() => onSelect(item)} className="group relative bg-brand-dark border border-white/5 rounded-2xl p-8 hover:border-brand-primary/50 transition-all duration-300 hover:-translate-y-2 cursor-pointer overflow-hidden shadow-lg">
                                    {type === 'blog' ? (
                                        <div className="h-48 -mx-8 -mt-8 mb-6 overflow-hidden">
                                            {item.image_url ? 
                                                <img 
                                                    src={getImageUrl(item.image_url, item.updated_at)} 
                                                    className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" 
                                                    alt={decodeText(item.title)}
                                                />
                                                : <div className="w-full h-full bg-brand-deep flex items-center justify-center"><i className="fa-solid fa-image text-4xl opacity-20"></i></div>
                                            }
                                        </div>
                                    ) : (
                                        <div className="w-16 h-16 rounded-2xl bg-brand-deep/50 border border-white/10 flex items-center justify-center mb-6 group-hover:bg-brand-primary transition-colors">
                                            <i className={`${item.icon || 'fa-solid fa-layer-group'} text-3xl text-brand-primary group-hover:text-white`}></i>
                                        </div>
                                    )}
                                    <div className="text-xs font-bold text-brand-primary mb-2 uppercase tracking-wider">{decodeText(item.category)}</div>
                                    <h3 className="text-2xl font-bold text-white mb-3 font-brand">{decodeText(item.title)}</h3>
                                    <p className="text-slate-400 text-sm leading-relaxed mb-4 line-clamp-3">{decodeText(item.summary)}</p>
                                    <div className="text-brand-secondary font-bold text-sm mt-auto inline-flex items-center gap-2 group-hover:gap-3 transition-all">
                                        {t.readMore} <i className="fa-solid fa-arrow-right"></i>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </section>
            );
        };

        const TechStack = () => {
            const techs = ["devicon-react-original", "devicon-nextjs-original", "devicon-python-plain", "devicon-docker-plain", "devicon-amazonwebservices-plain-wordmark", "devicon-kubernetes-plain", "devicon-postgresql-plain"];
            
            useEffect(() => {
                const scrollers = document.querySelectorAll(".scroller");
                scrollers.forEach((scroller) => {
                    if (scroller.getAttribute("data-animated") === "true") return;
                    scroller.setAttribute("data-animated", "true");
                    const scrollerInner = scroller.querySelector(".scroller__inner");
                    const scrollerContent = Array.from(scrollerInner.children);
                    scrollerContent.forEach((item) => {
                        const duplicatedItem = item.cloneNode(true);
                        duplicatedItem.setAttribute("aria-hidden", "true");
                        scrollerInner.appendChild(duplicatedItem);
                    });
                });
            }, []);
            
            return (
                <section className="py-10 bg-brand-surface/30 border-y border-white/5 overflow-hidden">
                    <div className="scroller w-full">
                        <div className="scroller__inner">
                            {techs.map((icon, i) => (<i key={i} className={`${icon} text-5xl text-slate-500 mx-8`}></i>))}
                        </div>
                    </div>
                </section>
            );
        };

        const Contact = ({ t }) => {
            const handleSubmit = (e) => {
                e.preventDefault();
                const form = e.target;
                const name = form.name.value;
                const email = form.email.value;
                const phone = form.phone.value;
                const msg = form.message.value;
                
                const subject = `İletişim Talebi: ${name}`;
                const body = `Ad Soyad: ${name}%0D%0ATelefon: ${phone}%0D%0AE-Posta: ${email}%0D%0A%0D%0AMesaj:%0D%0A${msg}`;
                
                window.location.href = `mailto:info@ittyazilim.com?subject=${subject}&body=${body}`;
            };

            return (
                <section id="contact" className="py-24 bg-brand-surface border-t border-white/5 relative overflow-hidden">
                    <div className="container mx-auto px-6">
                        <div className="grid lg:grid-cols-2 gap-12 items-center">
                            <div>
                                <span className="text-brand-primary font-bold tracking-widest text-sm uppercase mb-2 block">{t.contact.title}</span>
                                <h2 className="text-4xl font-bold text-white font-brand mb-6">{t.contact.subtitle}</h2>
                                <p className="text-slate-400 mb-8">Bilişim Vadisi'ndeki ofisimizde sizi kahveye bekleriz veya hemen bir online toplantı planlayabiliriz.</p>
                                
                                <div className="space-y-6">
                                    <div className="flex items-start gap-4">
                                        <div className="w-10 h-10 rounded bg-brand-dark border border-white/10 flex items-center justify-center text-brand-primary flex-shrink-0">
                                            <i className="fa-solid fa-location-dot"></i>
                                        </div>
                                        <div>
                                            <h4 className="text-white font-bold mb-1">Merkez Ofis</h4>
                                            <p className="text-sm text-slate-400 leading-relaxed">Muallimköy Mah. Deniz Cad. Muallimköy T.G.B. 1.Etap 1.1.C1 Blok No: 143/8 İç Kapı No: 201 Gebze / Kocaeli</p>
                                        </div>
                                    </div>
                                    <div className="flex items-start gap-4">
                                        <div className="w-10 h-10 rounded bg-brand-dark border border-white/10 flex items-center justify-center text-brand-primary flex-shrink-0">
                                            <i className="fa-solid fa-envelope"></i>
                                        </div>
                                        <div>
                                            <h4 className="text-white font-bold mb-1">E-Posta</h4>
                                            <p className="text-sm text-slate-400">info@ittyazilim.com</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="bg-brand-dark p-8 rounded-2xl border border-white/10 shadow-2xl">
                                <form className="space-y-4" onSubmit={handleSubmit}>
                                    <div className="grid md:grid-cols-2 gap-4">
                                        <input type="text" name="name" placeholder={t.contact.name} required className="w-full bg-brand-surface border border-white/10 rounded-lg p-3 text-white focus:border-brand-primary outline-none transition-colors" />
                                        <input type="text" name="phone" placeholder={t.contact.phone} required className="w-full bg-brand-surface border border-white/10 rounded-lg p-3 text-white focus:border-brand-primary outline-none transition-colors" />
                                    </div>
                                    <input type="email" name="email" placeholder={t.contact.email} required className="w-full bg-brand-surface border border-white/10 rounded-lg p-3 text-white focus:border-brand-primary outline-none transition-colors" />
                                    <textarea rows="4" name="message" placeholder={t.contact.msg} required className="w-full bg-brand-surface border border-white/10 rounded-lg p-3 text-white focus:border-brand-primary outline-none transition-colors"></textarea>
                                    <button type="submit" className="w-full bg-gradient-to-r from-brand-primary to-brand-secondary py-4 rounded-lg text-white font-bold hover:shadow-lg hover:shadow-brand-primary/20 transition-all flex items-center justify-center gap-2 group">
                                        {t.contact.btn} <i className="fa-solid fa-paper-plane group-hover:translate-x-1 transition-transform"></i>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        const Footer = ({ t }) => (
            <footer className="bg-[#0B1120] border-t border-white/5 py-12 text-sm relative overflow-hidden">
                <div className="absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-4xl h-1 bg-gradient-to-r from-transparent via-brand-primary to-transparent"></div>
                <div className="container mx-auto px-6 grid md:grid-cols-4 gap-12 text-slate-400">
                    <div className="md:col-span-1">
                        <img src="https://ittyazilim.com/img/index/ITT_beyaz_web-01.svg" alt="Logo" className="h-8 mb-6" />
                        <p className="leading-relaxed text-xs">
                            Information Transformation Technology.<br/>
                            Veriyi bilgiye, bilgiyi değere dönüştürüyoruz.
                        </p>
                    </div>
                    <div>
                        <h4 className="text-white font-bold mb-4">Adres</h4>
                        <p className="text-xs leading-loose">
                            Muallimköy Mah. Deniz Cad.<br/>
                            Muallimköy T.G.B. 1.Etap 1.1.C1 Blok<br/>
                            No: 143/8 İç Kapı No: 201<br/>
                            Gebze / Kocaeli / TÜRKİYE
                        </p>
                    </div>
                    <div>
                        <h4 className="text-white font-bold mb-4">Ürünler</h4>
                        <ul className="space-y-2 text-xs">
                            <li><a href="#" className="hover:text-brand-primary">AID360 ERP</a></li>
                            <li><a href="#" className="hover:text-brand-primary">KOBASİS</a></li>
                            <li><a href="#" className="hover:text-brand-primary">ITTSAR</a></li>
                            <li><a href="#" className="hover:text-brand-primary">KVS Video</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 className="text-white font-bold mb-4">Sosyal Medya</h4>
                        <div className="flex gap-4">
                            <a href="#" className="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center hover:bg-brand-primary hover:text-white transition-all"><i className="fa-brands fa-linkedin-in"></i></a>
                            <a href="#" className="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center hover:bg-brand-primary hover:text-white transition-all"><i className="fa-brands fa-twitter"></i></a>
                            <a href="#" className="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center hover:bg-brand-primary hover:text-white transition-all"><i className="fa-brands fa-instagram"></i></a>
                        </div>
                    </div>
                </div>
                <div className="text-center mt-12 pt-8 border-t border-white/5 text-xs text-slate-600">
                    &copy; 2025 ITT TEKNOLOJİ A.Ş. All rights reserved.
                </div>
            </footer>
        );

        // --- APP ROOT ---
        const App = () => {
            const [lang, setLang] = useState('tr');
            const [dbItems, setDbItems] = useState([]);
            const [selectedItem, setSelectedItem] = useState(null);
            const [isLoading, setIsLoading] = useState(true);
            const [error, setError] = useState(null);
            
            const t = UI_LABELS[lang];

            useEffect(() => {
                const fetchData = async () => {
                    setIsLoading(true);
                    
                    const client = await waitForSupabase();
                    
                    if (!client) {
                        console.error("Supabase client oluşturulamadı.");
                        setError("MISSING_KEYS");
                        setIsLoading(false);
                        return;
                    }
                    
                    try {
                        const { data, error } = await client
                            .from('site_content')
                            .select('*')
                            .eq('is_active', true)
                            .order('created_at', { ascending: false }); 
                        
                        if (error) {
                            console.error("Supabase sorgu hatası:", error);
                            throw error;
                        }
                        
                        console.log("✅ Veri çekildi:", data?.length, "kayıt");
                        setDbItems(data || []);
                        setError(null);
                    } catch (err) {
                        console.error("❌ Supabase Error:", err);
                        setError("FETCH_ERROR");
                    } finally {
                        setIsLoading(false);
                    }
                };
                
                fetchData();
            }, []);

            const currentItems = useMemo(() => {
                if (!selectedItem) return [];
                return dbItems.filter(i => i.type === selectedItem.type && i.lang === lang);
            }, [selectedItem, lang, dbItems]);

            const handleNext = () => {
                const currentIndex = currentItems.findIndex(i => i.id === selectedItem.id);
                const nextIndex = (currentIndex + 1) % currentItems.length;
                setSelectedItem(currentItems[nextIndex]);
            };

            const handlePrev = () => {
                const currentIndex = currentItems.findIndex(i => i.id === selectedItem.id);
                const prevIndex = (currentIndex - 1 + currentItems.length) % currentItems.length;
                setSelectedItem(currentItems[prevIndex]);
            };

            useEffect(() => {
                document.documentElement.lang = lang;
                document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
                document.body.classList.toggle('font-arabic', lang === 'ar');
                document.body.classList.toggle('font-sans', lang !== 'ar');
            }, [lang]);

            return (
                <div className="min-h-screen flex flex-col">
                    <Navbar lang={lang} setLang={setLang} t={t} />
                    <Hero t={t} />
                    <TechStack t={t} />
                    
                    {error === "MISSING_KEYS" && (
                        <div className="bg-red-500/20 text-red-200 p-4 text-center border border-red-500/50 m-4 rounded">
                            {t.error}
                        </div>
                    )}

                    {error === "LIB_ERROR" && (
                        <div className="bg-red-500/20 text-red-200 p-4 text-center border border-red-500/50 m-4 rounded">
                            {t.libError}
                        </div>
                    )}

                    <ContentSection id="products" type="product" title={t.titles.products} items={dbItems} onSelect={setSelectedItem} lang={lang} t={t} isLoading={isLoading} />
                    <ContentSection id="services" type="service" title={t.titles.services} items={dbItems} onSelect={setSelectedItem} lang={lang} t={t} isLoading={isLoading} />
                    <ContentSection id="blog" type="blog" title={t.titles.blog} items={dbItems} onSelect={setSelectedItem} lang={lang} t={t} isLoading={isLoading} />
                    
                    <Contact t={t} />

                    <DetailModal 
                        item={selectedItem} 
                        isOpen={!!selectedItem} 
                        onClose={() => setSelectedItem(null)}
                        onNext={handleNext}
                        onPrev={handlePrev}
                        isRTL={lang === 'ar'}
                        t={t}
                    />

                    <Footer t={t} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>